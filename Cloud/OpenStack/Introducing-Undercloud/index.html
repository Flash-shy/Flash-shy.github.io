<!DOCTYPE html><html lang="en-GB" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OpenStack Series Chapter2:Introducing Undercloud | Haoyang Sun's Blog</title><meta name="author" content="Haoyang Sun"><meta name="copyright" content="Haoyang Sun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Let&#39;s understand the core Red Hat OpenStack components, manage undercloud services, and view the undercloud structure in this Chapter.">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenStack Series Chapter2:Introducing Undercloud">
<meta property="og:url" content="https://www.sunhaoyang.net/Cloud/OpenStack/Introducing-Undercloud/index.html">
<meta property="og:site_name" content="Haoyang Sun&#39;s Blog">
<meta property="og:description" content="Let&#39;s understand the core Red Hat OpenStack components, manage undercloud services, and view the undercloud structure in this Chapter.">
<meta property="og:locale" content="en_GB">
<meta property="og:image" content="https://blog.sunhaoyang.net/images/OpenStack.png">
<meta property="article:published_time" content="2025-04-30T14:24:57.000Z">
<meta property="article:modified_time" content="2025-05-06T14:21:01.218Z">
<meta property="article:author" content="Haoyang Sun">
<meta property="article:tag" content="OpenStack">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.sunhaoyang.net/images/OpenStack.png"><link rel="shortcut icon" href="https://blog.sunhaoyang.net/images/favicon.ico"><link rel="canonical" href="https://www.sunhaoyang.net/Cloud/OpenStack/Introducing-Undercloud/index.html"><link rel="preconnect"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OpenStack Series Chapter2:Introducing Undercloud',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://blog.sunhaoyang.net/images/myphoto.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Homepage</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-comment-alt"></i><span> Artitalk</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa-solid fa-user"></i><span> About the author</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Haoyang Sun's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">OpenStack Series Chapter2:Introducing Undercloud</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Homepage</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-comment-alt"></i><span> Artitalk</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa-solid fa-user"></i><span> About the author</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">OpenStack Series Chapter2:Introducing Undercloud</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-04-30T14:24:57.000Z" title="Created 2025-04-30 22:24:57">2025-04-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-05-06T14:21:01.218Z" title="Updated 2025-05-06 22:21:01">2025-05-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Cloud/">Cloud</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>13mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/Cloud/OpenStack/Introducing-Undercloud/index.html#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><article class="container post-content" id="article-container"><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>The Director undercloud node is an <code>all-in-one</code> Red Hat OpenStack Platform (RHOSP) deployment which provides the services used to install and manage OpenStack overclouds. The deployment toolset is the Deployment service known as <code>TripleO</code>. TripleO uses other existing OpenStack components, such as <code>Heat</code>, and <code>Ansible Playbooks</code>, to provision, deploy, and configure bare-metal systems as OpenStack cloud nodes.</p>
<blockquote>
<p>The undercloud is a deployment cloud for overclouds, in which the workload is the overcloud nodes themselves, such as the controller, compute, and storage nodes.</p>
</blockquote>
<h2 id="Components-and-Services"><a href="#Components-and-Services" class="headerlink" title="Components and Services"></a>Components and Services</h2><ul>
<li><p>Identity Service (Keystone)</p>
<p>The Identity service provides user authentication and authorization, but only to the undercloud’s OpenStack services.</p>
</li>
<li><p>Image Service (Glance)</p>
<p>The Image service stores the initial images to be deployed to bare-metal nodes. These images contain the Red Hat Enterprise Linux (RHEL) operating system, a KVM hypervisor, and container runtimes.</p>
</li>
<li><p>Compute Service (Nova)</p>
<p>The Compute service works with the Bare Metal service to provision nodes, by introspecting available systems to obtain hardware attributes. The Compute service’s scheduling function filters the available nodes to ensure that selected nodes meet role requirements.</p>
</li>
<li><p>Bare Metal Service (Ironic)</p>
<p>The Bare Metal service manages and provisions physical machines. The ironic-inspector service performs introspection by PXE booting unregistered hardware. The undercloud uses an out-of-band management interface, such as IPMI, to perform power management during introspection.</p>
</li>
<li><p>Orchestration Service (Heat)</p>
<p>The Orchestration service provides a set of YAML templates and node roles to define configuration and provisioning instructions for overcloud deployment. Default orchestration templates are located at &#x2F;usr&#x2F;share&#x2F;openstack-tripleo-heat-templates, and are designed to be customized using environment parameter files.</p>
</li>
<li><p>Object Service (Swift)</p>
<p>The undercloud Object store holds images, deployment logs, and introspection results.</p>
</li>
<li><p>Networking Service (Neutron)</p>
<p>The Networking service configures interfaces for the required provisioning and external networks. The provisioning network provides DHCP and PXE boot functions for bare-metal nodes. The external network provides public connectivity.</p>
</li>
</ul>
<h2 id="Viewing-services"><a href="#Viewing-services" class="headerlink" title="Viewing services"></a>Viewing services</h2><p>When you complete the undercloud installation, the system will secretly place a stackrc file in the stack user’s home directory. And let me tell you, this file is a real gem! It’s like a “magic key” that lets you easily access various services on the undercloud.</p>
<p>The stackrc file will automatically “borrow” a few things from the stack user’s .bashrc file, and as a result, it gains admin-level access to the undercloud. With it, you can manage and interact with the undercloud services as if you were an administrator.</p>
<p>In this file, there’s one particularly important element called OS_AUTH_URL. It’s like a “satnav,” pointing to the public endpoint of the undercloud’s identity service. Simply put, it tells your system: “Hey, head over here to find the authentication service!” This way, you can easily communicate with the services on the undercloud.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ source stackrc</span><br></pre></td></tr></table></figure>

<h3 id="Listing-all-services"><a href="#Listing-all-services" class="headerlink" title="Listing all services"></a>Listing all services</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ openstack service list</span><br><span class="line">+----------------------------------+------------------+-------------------------+</span><br><span class="line">| ID                               | Name             | Type                    |</span><br><span class="line">+----------------------------------+------------------+-------------------------+</span><br><span class="line">| 2a08c08cc51a4f299536fc66e4b748b6 | nova             | compute                 |</span><br><span class="line">| 313b7a22ef534d3fa367f50d7c9e2754 | mistral          | workflowv2              |</span><br><span class="line">| 417c10b71acb4c1aa40169e251b3d16d | zaqar-websocket  | messaging-websocket     |</span><br><span class="line">| 4d957e71f3284818b3a0617218f446bd | neutron          | network                 |</span><br><span class="line">| 6402d082e73a459c93d5e0b70783b7e5 | placement        | placement               |</span><br><span class="line">| 6f778463089446f49905f6842c25d92e | ironic-inspector | baremetal-introspection |</span><br><span class="line">| 7aa774aa28c344e49aa9eb01de4900ec | zaqar            | messaging               |</span><br><span class="line">| a4158e3f67a1472cb0798ebc979e4e3a | ironic           | baremetal               |</span><br><span class="line">| a822dfa8c6da4695a702b46e38d0077d | heat             | orchestration           |</span><br><span class="line">| ba7910222ac042c6a847a9a3c3c5074a | glance           | image                   |</span><br><span class="line">| bd92462118c042a1a55967372b4b695f | keystone         | identity                |</span><br><span class="line">| d9a5f802093d48958acb7f6e857f0384 | swift            | object-store            |</span><br><span class="line">+----------------------------------+------------------+-------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="Listing-all-services’-endpoint"><a href="#Listing-all-services’-endpoint" class="headerlink" title="Listing all services’ endpoint"></a>Listing all services’ endpoint</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ openstack endpoint list -c &#x27;Service Type&#x27; -c &#x27;Interface&#x27; -c &#x27;URL&#x27;</span><br><span class="line">+-------------------------+-----------+----------------------------------------------------+</span><br><span class="line">| Service Type            | Interface | URL                                                |</span><br><span class="line">+-------------------------+-----------+----------------------------------------------------+</span><br><span class="line">| placement               | internal  | http://172.25.249.202:8778/placement               |</span><br><span class="line">| image                   | internal  | http://172.25.249.202:9292                         |</span><br><span class="line">| baremetal               | internal  | http://172.25.249.202:6385                         |</span><br><span class="line">| messaging-websocket     | admin     | ws://172.25.249.202:9000                           |</span><br><span class="line">| placement               | admin     | http://172.25.249.202:8778/placement               |</span><br><span class="line">| identity                | admin     | http://172.25.249.202:35357                        |</span><br><span class="line">| compute                 | internal  | http://172.25.249.202:8774/v2.1                    |</span><br><span class="line">| identity                | public    | https://172.25.249.201:13000                       |</span><br><span class="line">| baremetal-introspection | admin     | http://172.25.249.202:5050                         |</span><br><span class="line">| messaging               | internal  | http://172.25.249.202:8888                         |</span><br><span class="line">| baremetal               | public    | https://172.25.249.201:13385                       |</span><br><span class="line">| messaging-websocket     | internal  | ws://172.25.249.202:9000                           |</span><br><span class="line">| image                   | admin     | http://172.25.249.202:9292                         |</span><br><span class="line">| orchestration           | internal  | http://172.25.249.202:8004/v1/%(tenant_id)s        |</span><br><span class="line">| placement               | public    | https://172.25.249.201:13778/placement             |</span><br><span class="line">| image                   | public    | https://172.25.249.201:13292                       |</span><br><span class="line">| compute                 | admin     | http://172.25.249.202:8774/v2.1                    |</span><br><span class="line">| orchestration           | public    | https://172.25.249.201:13004/v1/%(tenant_id)s      |</span><br><span class="line">| object-store            | public    | https://172.25.249.201:13808/v1/AUTH_%(tenant_id)s |</span><br><span class="line">| orchestration           | admin     | http://172.25.249.202:8004/v1/%(tenant_id)s        |</span><br><span class="line">| baremetal-introspection | internal  | http://172.25.249.202:5050                         |</span><br><span class="line">| network                 | admin     | http://172.25.249.202:9696                         |</span><br><span class="line">| network                 | public    | https://172.25.249.201:13696                       |</span><br><span class="line">| workflowv2              | admin     | http://172.25.249.202:8989/v2                      |</span><br><span class="line">| baremetal               | admin     | http://172.25.249.202:6385                         |</span><br><span class="line">| messaging-websocket     | public    | wss://172.25.249.201:9000                          |</span><br><span class="line">| object-store            | admin     | http://172.25.249.202:8080                         |</span><br><span class="line">| identity                | internal  | http://172.25.249.202:5000                         |</span><br><span class="line">| workflowv2              | public    | https://172.25.249.201:13989/v2                    |</span><br><span class="line">| messaging               | admin     | http://172.25.249.202:8888                         |</span><br><span class="line">| messaging               | public    | https://172.25.249.201:13888                       |</span><br><span class="line">| workflowv2              | internal  | http://172.25.249.202:8989/v2                      |</span><br><span class="line">| compute                 | public    | https://172.25.249.201:13774/v2.1                  |</span><br><span class="line">| network                 | internal  | http://172.25.249.202:9696                         |</span><br><span class="line">| object-store            | internal  | http://172.25.249.202:8080/v1/AUTH_%(tenant_id)s   |</span><br><span class="line">| baremetal-introspection | public    | https://172.25.249.201:13050                       |</span><br><span class="line">+-------------------------+-----------+----------------------------------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="Listing-all-services’-password"><a href="#Listing-all-services’-password" class="headerlink" title="Listing all services’ password"></a>Listing all services’ password</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ cat undercloud-passwords.conf</span><br><span class="line">[auth]</span><br><span class="line">undercloud_admin_password: B7Hk2yX2zly2tKwDrVh3TGFjp</span><br><span class="line">undercloud_admin_token: B88pjtnpb7ch1bCMLUJqLdGAj</span><br><span class="line">undercloud_aodh_password: LKNMhUQNwhmapU74r8k8Llraw</span><br><span class="line">undercloud_barbican_password: Aoi7Ai5Osgh4tjcfI6cc8OyWh</span><br><span class="line">undercloud_barbican_simple_crypto_kek: bMabXDjqvX2k70V3c9Sip1na-Waw9N4VB-FQMMbxlqM=</span><br><span class="line">undercloud_ceilometer_password: fmQ3eAQ3Eo9lIv5DL9C8okMzz</span><br><span class="line">undercloud_ceph_grafana_admin_password: n42P9DzDhGxh7Emg5RPGt1SAE</span><br><span class="line">undercloud_ceph_dashboard_admin_password: KTUxEA7MHFo4CP4KqHNnz7PQc</span><br><span class="line">undercloud_cinder_password: db0EqnRpJ2JYkaIHMsPsdSwtJ</span><br><span class="line">undercloud_congress_password: 1guMjvHqlYUDdbE60XoJxapgw</span><br><span class="line">undercloud_designate_password: y4m53qVg8ulS1x3nDgwK7CdG2</span><br><span class="line">undercloud_ec2_api_password: vNSVPFS5l05F9cyDhtfOXLeyH</span><br><span class="line">undercloud_etcd_initial_cluster_token: dxmxMFJZ98HQ6eYBnX0nCCdB2</span><br><span class="line">undercloud_glance_password: 3l62WMyGenHPfIcoWDJhLlqaG</span><br><span class="line">undercloud_gnocchi_password: dAvnYVTzljdBPyn0gyi4b2LOh</span><br><span class="line">undercloud_ha_proxy_stats_password: bszPVap67n7B7h4DF6KD2gfrL</span><br><span class="line">undercloud_heat_password: IVgrfc9UKjBTAUOsjcsDUOjCx</span><br><span class="line">undercloud_heat_stack_domain_admin_password: 3DzFaXoB9DodArrdxEnA0Xclo</span><br><span class="line">undercloud_ironic_password: rcmaIUqoE3ft4vwfgGzWnUV80</span><br><span class="line">undercloud_libvirt_tls_password: McT2WnXIzmzWYfoHmg3nzDnP2</span><br><span class="line">undercloud_manila_password: PrNre8t0uKmglYPMGJrSp5DpU</span><br><span class="line">undercloud_mistral_password: u6iGEVtUbpjBus07ksfwB9v75</span><br><span class="line">undercloud_mysql_clustercheck_password: zjywUyG4OhHUhZF3FHIpagjwe</span><br><span class="line">undercloud_mysql_root_password: 2mo7UszHbM</span><br><span class="line">undercloud_neutron_password: wvaPHleiR0P2IpNIrbZ5JcPsS</span><br><span class="line">undercloud_nova_password: 12k2eWmgC0dMezTQeA2R1iLK1</span><br><span class="line">undercloud_novajoin_password: 6bYmgcdhEtcxPbGslIhIiqYuP</span><br><span class="line">undercloud_octavia_password: nm7jAQgPloK8O9lSi8dUW7aCy</span><br><span class="line">undercloud_open_daylight_password: t6ZrMUpqMce7Rls9pbkDGg9Rc</span><br><span class="line">undercloud_panko_password: iW8YEy4xPrzxHT7Uz7nP1CmfE</span><br><span class="line">undercloud_pcsd_password: BSUPMkdeMJwIUsy3</span><br><span class="line">undercloud_placement_password: oEwI1ubaJq4WwZ5HXhTc5357D</span><br><span class="line">undercloud_rpc_password: BOIlN86QyW6NnvIJrtEMgM3jx</span><br><span class="line">undercloud_notify_password: xhqWzQqHcdV1JCMhlSeM8lwzy</span><br><span class="line">undercloud_rabbit_password: 8ttaCabqb9I9ncw3lgBVrItw4</span><br><span class="line">undercloud_redis_password: xRelsoGSzeZqn12Lqk4RMQvjj</span><br><span class="line">undercloud_sahara_password: VgJjC5rDGM8hjAair44G67j7s</span><br><span class="line">undercloud_snmpd_readonly_user_password: Fxz5cmRlA0JhAK4tuzNF2Asae</span><br><span class="line">undercloud_swift_password: 9VRDEP87fnpWEBWJ623ct4x3i</span><br><span class="line">undercloud_zaqar_password: 8wS1kCJ9u5QjQQE37YqADmK5c</span><br></pre></td></tr></table></figure>

<h2 id="Viewing-the-network"><a href="#Viewing-the-network" class="headerlink" title="Viewing the network"></a>Viewing the network</h2><p>Using DHCP and PXE boot, a dedicated high-throughput provisioning network is employed to prepare and deploy the overcloud nodes. This dedicated network acts like an “exclusive lane,” purpose-built to quickly and efficiently handle node configuration and deployment.</p>
<p>Once you’ve deployed the overcloud, the undercloud continues to play a supporting role on this provisioning network—managing the overcloud nodes and updating them as needed. Since the provisioning network is isolated, it’s completely separate from the internal overcloud traffic and external workload traffic, ensuring no interference. This separation results in a more stable overcloud environment and makes ongoing management much easier.</p>
<p>In simple terms, the undercloud sets up a “fast lane” for overcloud nodes—speeding up deployment while quietly managing things in the background, without affecting any other traffic. It’s a brilliantly designed setup!</p>
<h3 id="dhcp-range"><a href="#dhcp-range" class="headerlink" title="dhcp range"></a>dhcp range</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ cat undercloud.conf | egrep -v &quot;(^#.*|^$)&quot;</span><br><span class="line">[DEFAULT]</span><br><span class="line">container_images_file = /home/stack/containers-prepare-parameter.yaml</span><br><span class="line">custom_env_files = /home/stack/custom-undercloud-params.yaml</span><br><span class="line">enable_telemetry = false</span><br><span class="line">generate_service_certificate = false</span><br><span class="line">hieradata_override = /home/stack/hieradata.yaml</span><br><span class="line">local_interface = eth1</span><br><span class="line">local_ip = 172.25.249.200/24</span><br><span class="line">overcloud_domain_name = overcloud.example.com</span><br><span class="line">undercloud_admin_host = 172.25.249.202</span><br><span class="line">undercloud_debug = false</span><br><span class="line">undercloud_ntp_servers = 172.25.254.254</span><br><span class="line">undercloud_public_host = 172.25.249.201</span><br><span class="line">undercloud_service_certificate = /etc/pki/tls/certs/undercloud.pem</span><br><span class="line">[ctlplane-subnet]</span><br><span class="line">cidr = 172.25.249.0/24</span><br><span class="line">dhcp_end = 172.25.249.59</span><br><span class="line">dhcp_start = 172.25.249.51</span><br><span class="line">gateway = 172.25.249.200</span><br><span class="line">inspection_iprange = 172.25.249.150,172.25.249.180</span><br><span class="line">masquerade = true</span><br></pre></td></tr></table></figure>

<p><code>dhcp_end</code> and <code>dhcp_start</code>: Represents the range of IP addresses dynamically assigned via DHCP.</p>
<p>IPs within this range are officially allocated to nodes once they’ve completed PXE boot and registration. These become the permanent management IPs (also known as ctlplane IPs).</p>
<p>In other words, these are the addresses that nodes will ultimately use after booting.</p>
<p>Specifies the temporary IP range assigned to nodes during PXE boot, used by ironic-inspector (or other node discovery tools).</p>
<p><code>inspection_iprange</code>:</p>
<p>These IPs are <code>temporarily</code> leased to nodes that are being discovered or prepared for deployment. Once deployment is complete, the IPs are released, and the nodes will switch to using addresses <code>from the dhcp_start to dhcp_end</code> range.</p>
<h3 id="ip-info"><a href="#ip-info" class="headerlink" title="ip info"></a>ip info</h3><p>In the following output, the br-ctlplane bridge is the 172.25.249.0 provisioning network. The eth1 interface is the 172.25.250.0 public network.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ ip -br a</span><br><span class="line">lo               UNKNOWN        127.0.0.1/8 ::1/128 </span><br><span class="line">eth0             UP             172.25.250.200/24 fe80::1f21:2be6:7500:dfef/64 </span><br><span class="line">eth1             UP             fe80::5054:ff:fe00:f9c8/64 </span><br><span class="line">ovs-system       DOWN           </span><br><span class="line">br-int           DOWN           </span><br><span class="line">br-ctlplane      UNKNOWN        172.25.249.200/24 172.25.249.202/32 172.25.249.201/32 fe80::5054:ff:fe00:f9c8/64 </span><br></pre></td></tr></table></figure>

<h3 id="Check-the-IP-range-assigned-to-the-br-ctlplane-bridge"><a href="#Check-the-IP-range-assigned-to-the-br-ctlplane-bridge" class="headerlink" title="Check the IP range assigned to the br_ctlplane bridge"></a>Check the IP range assigned to the br_ctlplane bridge</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ openstack subnet show ctlplane-subnet</span><br><span class="line">+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field             | Value                                                                                                                                                   |</span><br><span class="line">+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| allocation_pools  | 172.25.249.51-172.25.249.59                                                                                                                             |</span><br><span class="line">| cidr              | 172.25.249.0/24                                                                                                                                         |</span><br><span class="line">| created_at        | 2020-10-22T09:22:35Z                                                                                                                                    |</span><br><span class="line">| description       |                                                                                                                                                         |</span><br><span class="line">| dns_nameservers   |                                                                                                                                                         |</span><br><span class="line">| enable_dhcp       | True                                                                                                                                                    |</span><br><span class="line">| gateway_ip        | 172.25.249.200                                                                             </span><br></pre></td></tr></table></figure>

<h2 id="Viewing-Provisioning-Resources"><a href="#Viewing-Provisioning-Resources" class="headerlink" title="Viewing Provisioning Resources"></a>Viewing Provisioning Resources</h2><p>At the very start of hardware configuration, the bare-metal provisioning service uses IPMI to give the managed nodes the “green light” to power on. Then, by default, these nodes will boot via PXE and begin “asking around”: they’ll request a temporary IP address from the DHCP server and fetch the bootable temporary kernel and ramdisk images. From there, they can begin the network boot process.</p>
<h3 id="Listing-all-images"><a href="#Listing-all-images" class="headerlink" title="Listing all images"></a>Listing all images</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ openstack image list</span><br><span class="line">+--------------------------------------+------------------------+--------+</span><br><span class="line">| ID                                   | Name                   | Status |</span><br><span class="line">+--------------------------------------+------------------------+--------+</span><br><span class="line">| da2b80ea-5ffc-400c-bc0c-82b04facad9e | overcloud-full         | active |</span><br><span class="line">| 9826607c-dff5-45b0-b0c4-78c44b8665e9 | overcloud-full-initrd  | active |</span><br><span class="line">| bc188e61-99c5-4d32-8c32-e1e3d467149d | overcloud-full-vmlinuz | active |</span><br><span class="line">+--------------------------------------+------------------------+--------+</span><br></pre></td></tr></table></figure>

<ul>
<li><p>overcloud-full</p>
<p>This image typically contains a complete operating system along with all the necessary components required for deploying OpenStack.</p>
</li>
<li><p>overcloud-full-initrd</p>
<p>This is the initrd image, which includes essential files and drivers needed during the boot process.</p>
</li>
<li><p>overcloud-full-vmlinuz</p>
<p>This is the compressed Linux kernel image responsible for initiating the operating system.</p>
</li>
</ul>
<h3 id="Listing-all-registered-nodes"><a href="#Listing-all-registered-nodes" class="headerlink" title="Listing all registered nodes"></a>Listing all registered nodes</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ openstack baremetal node list -c Name -c &#x27;Power State&#x27; -c &#x27;Provisioning State&#x27;</span><br><span class="line">+-------------+-------------+--------------------+</span><br><span class="line">| Name        | Power State | Provisioning State |</span><br><span class="line">+-------------+-------------+--------------------+</span><br><span class="line">| controller0 | power on    | active             |</span><br><span class="line">| compute0    | power on    | active             |</span><br><span class="line">| computehci0 | power on    | active             |</span><br><span class="line">| compute1    | power on    | active             |</span><br><span class="line">| ceph0       | power on    | active             |</span><br><span class="line">+-------------+-------------+--------------------+</span><br></pre></td></tr></table></figure>

<h2 id="Power-management-on-the-Undercloud"><a href="#Power-management-on-the-Undercloud" class="headerlink" title="Power management on the Undercloud"></a>Power management on the Undercloud</h2><p>In a typical overcloud deployment, the nodes are mostly physical machines—such as blade servers or rack-mounted servers. These systems come with a very handy feature: unattended out-of-band management interfaces that allow remote power control. Extremely convenient!</p>
<p>As for the Bare Metal service, when nodes are being registered, it loads all the power management parameters in one go. These parameters are read from a configuration file called instackenv-initial.json. Simply put, this file acts like a “manual,” instructing the Bare Metal service on how to manage the power for each node.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ cat instackenv-initial.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;nodes&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;controller0&quot;,</span><br><span class="line">      &quot;arch&quot;: &quot;x86_64&quot;,</span><br><span class="line">      &quot;cpu&quot;: &quot;2&quot;,</span><br><span class="line">      &quot;disk&quot;: &quot;40&quot;,</span><br><span class="line">      &quot;memory&quot;: &quot;8192&quot;,</span><br><span class="line">      &quot;mac&quot;: [ &quot;52:54:00:00:f9:01&quot; ],</span><br><span class="line">      &quot;pm_addr&quot;: &quot;172.25.249.101&quot;,</span><br><span class="line">      &quot;pm_type&quot;: &quot;pxe_ipmitool&quot;,</span><br><span class="line">      &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">      &quot;pm_password&quot;: &quot;password&quot;,</span><br><span class="line">      &quot;pm_port&quot;: &quot;623&quot;,</span><br><span class="line">      &quot;capabilities&quot;: &quot;node:controller0,boot_option:local&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;compute0&quot;,</span><br><span class="line">      &quot;arch&quot;: &quot;x86_64&quot;,</span><br><span class="line">      &quot;cpu&quot;: &quot;2&quot;,</span><br><span class="line">      &quot;disk&quot;: &quot;40&quot;,</span><br><span class="line">      &quot;memory&quot;: &quot;6144&quot;,</span><br><span class="line">      &quot;mac&quot;: [ &quot;52:54:00:00:f9:02&quot; ],</span><br><span class="line">      &quot;pm_addr&quot;: &quot;172.25.249.102&quot;,</span><br><span class="line">      &quot;pm_type&quot;: &quot;pxe_ipmitool&quot;,</span><br><span class="line">      &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">      &quot;pm_password&quot;: &quot;password&quot;,</span><br><span class="line">      &quot;pm_port&quot;: &quot;623&quot;,</span><br><span class="line">      &quot;capabilities&quot;: &quot;node:compute0,boot_option:local&quot;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Performing-IPMI-Power-Management"><a href="#Performing-IPMI-Power-Management" class="headerlink" title="Performing IPMI Power Management"></a>Performing IPMI Power Management</h3><p>check the IPMI address</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ cat instackenv-initial.json | jq &#x27;.nodes[] | &#123;name: .name, pm_addr: .pm_addr, pm_user: .pm_user, pm_password: .pm_password&#125;&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;controller0&quot;,</span><br><span class="line">  &quot;pm_addr&quot;: &quot;172.25.249.101&quot;,</span><br><span class="line">  &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;pm_password&quot;: &quot;password&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;compute0&quot;,</span><br><span class="line">  &quot;pm_addr&quot;: &quot;172.25.249.102&quot;,</span><br><span class="line">  &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;pm_password&quot;: &quot;password&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;computehci0&quot;,</span><br><span class="line">  &quot;pm_addr&quot;: &quot;172.25.249.106&quot;,</span><br><span class="line">  &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;pm_password&quot;: &quot;password&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;compute1&quot;,</span><br><span class="line">  &quot;pm_addr&quot;: &quot;172.25.249.112&quot;,</span><br><span class="line">  &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;pm_password&quot;: &quot;password&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;ceph0&quot;,</span><br><span class="line">  &quot;pm_addr&quot;: &quot;172.25.249.103&quot;,</span><br><span class="line">  &quot;pm_user&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;pm_password&quot;: &quot;password&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Operation on Power</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(undercloud) [stack@director ~]$ ipmitool -I lanplus \</span><br><span class="line">&gt; -U admin -P password -H 172.25.249.101 power status</span><br><span class="line">Chassis Power is on</span><br><span class="line"></span><br><span class="line">(undercloud) [stack@director ~]$ openstack baremetal node power on controller0</span><br><span class="line">(undercloud) [stack@director ~]$ openstack baremetal node power off controller0</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://www.sunhaoyang.net">Haoyang Sun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://www.sunhaoyang.net/Cloud/OpenStack/Introducing-Undercloud/index.html">https://www.sunhaoyang.net/Cloud/OpenStack/Introducing-Undercloud/index.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">This article is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Please attribute the original author and source when sharing.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OpenStack/">OpenStack</a></div><div class="post-share"><div class="social-share" data-image="https://blog.sunhaoyang.net/images/OpenStack.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Buy Me a Coffee</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://blog.sunhaoyang.net/images/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://blog.sunhaoyang.net/images/wechat.jpg" alt="Wechat"/></a><div class="post-qr-code-desc">Wechat</div></li><li class="reward-item"><a href="https://blog.sunhaoyang.net/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://blog.sunhaoyang.net/images/alipay.jpg" alt="Alipay"/></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Cloud/OpenStack/Introducing-Overcloud/index.html" title="OpenStack Series Chapter3:Introducing Overcloud"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">OpenStack Series Chapter3:Introducing Overcloud</div></div><div class="info-2"><div class="info-item-1">Similarly, Let's understand the core Red Hat OpenStack components, manage overcloud services, and view the overcloud structure in this Chapter.</div></div></div></a><a class="pagination-related" href="/Database/MySQL/Introduction/index.html" title="MySQL Series Chapter0: Introduction"><img class="cover" src="https://blog.sunhaoyang.net/images/MySQL.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">MySQL Series Chapter0: Introduction</div></div><div class="info-2"><div class="info-item-1">This article goes through the basics that you should know when working with MySQL.</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/Cloud/OpenStack/Openstack-Deployment-Overview/index.html" title="Openstack Deployment Series Chapter0:Overview"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-06</div><div class="info-item-2">Openstack Deployment Series Chapter0:Overview</div></div><div class="info-2"><div class="info-item-1">This deployment uses a fully manual approach, with the aim of helping everyone understand the deployment details and how the components work together.</div></div></div></a><a class="pagination-related" href="/Cloud/OpenStack/Creating-and-Deleting-VMs-instaces(1)/index.html" title="OpenStack Series Chapter0: Creating and Deleting VMs instaces(1)"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-12</div><div class="info-item-2">OpenStack Series Chapter0: Creating and Deleting VMs instaces(1)</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces how to create and delete the VMs instance in openstack by clicking on the mangement dashboard.</div></div></div></a><a class="pagination-related" href="/Cloud/OpenStack/Creating-and-Deleting-VMs-instaces(2)/index.html" title="OpenStack Series Chapter0: Creating and Deleting VMs instaces(2)"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-14</div><div class="info-item-2">OpenStack Series Chapter0: Creating and Deleting VMs instaces(2)</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces how to create and delete the VMs instance in openstack by using CLI in terminal.</div></div></div></a><a class="pagination-related" href="/Cloud/OpenStack/Introducing-Containerized-Services/index.html" title="OpenStack Series Chapter1:Introducing Containerized Services"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-29</div><div class="info-item-2">OpenStack Series Chapter1:Introducing Containerized Services</div></div><div class="info-2"><div class="info-item-1">This article provides a detailed introduction to how the main services of OpenStack run in containers through TripleO. It covers the relevant container commands in detail, as well as how to manage container services using systemd.</div></div></div></a><a class="pagination-related" href="/Cloud/OpenStack/Introducing-Overcloud/index.html" title="OpenStack Series Chapter3:Introducing Overcloud"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-06</div><div class="info-item-2">OpenStack Series Chapter3:Introducing Overcloud</div></div><div class="info-2"><div class="info-item-1">Similarly, Let's understand the core Red Hat OpenStack components, manage overcloud services, and view the overcloud structure in this Chapter.</div></div></div></a><a class="pagination-related" href="/Cloud/OpenStack/Identifying-shared-services-and-VNC/index.html" title="OpenStack Series Chapter4: Identifying shared services and VNC"><img class="cover" src="https://blog.sunhaoyang.net/images/OpenStack.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-07</div><div class="info-item-2">OpenStack Series Chapter4: Identifying shared services and VNC</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces the shared services running on the controller node and the process of VNC.</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://blog.sunhaoyang.net/images/myphoto.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Haoyang Sun</div><div class="author-info-description">DevOps Engineer, Cloud-native Engineer, Open-source technology enthusiast</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content"><div class="center-content" style="text-align: center;">
    <p>My blog is now live!</p>
    <p>Hello everyone! Thank you for visiting my blog!</p>
    <p>Here, I will share my thoughts and reflections on various technologies and aspects of life.</p>
    <p>Please stay tuned for updates!:)</p>
    <p>If you’re interested in discussing any topic with me, feel free to leave a comment or reach out through the contact information provided below.</p>
    <p>Email: Flash_shy@163.com</p>
    <p>QQ ID: 1135300457</p>
    <p>Wechat ID: Flash_sunhy</p>
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Overview"><span class="toc-number">1.</span> <span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Components-and-Services"><span class="toc-number">2.</span> <span class="toc-text">Components and Services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewing-services"><span class="toc-number">3.</span> <span class="toc-text">Viewing services</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-all-services"><span class="toc-number">3.1.</span> <span class="toc-text">Listing all services</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-all-services%E2%80%99-endpoint"><span class="toc-number">3.2.</span> <span class="toc-text">Listing all services’ endpoint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-all-services%E2%80%99-password"><span class="toc-number">3.3.</span> <span class="toc-text">Listing all services’ password</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewing-the-network"><span class="toc-number">4.</span> <span class="toc-text">Viewing the network</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dhcp-range"><span class="toc-number">4.1.</span> <span class="toc-text">dhcp range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip-info"><span class="toc-number">4.2.</span> <span class="toc-text">ip info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Check-the-IP-range-assigned-to-the-br-ctlplane-bridge"><span class="toc-number">4.3.</span> <span class="toc-text">Check the IP range assigned to the br_ctlplane bridge</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewing-Provisioning-Resources"><span class="toc-number">5.</span> <span class="toc-text">Viewing Provisioning Resources</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-all-images"><span class="toc-number">5.1.</span> <span class="toc-text">Listing all images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Listing-all-registered-nodes"><span class="toc-number">5.2.</span> <span class="toc-text">Listing all registered nodes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Power-management-on-the-Undercloud"><span class="toc-number">6.</span> <span class="toc-text">Power management on the Undercloud</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Performing-IPMI-Power-Management"><span class="toc-number">6.1.</span> <span class="toc-text">Performing IPMI Power Management</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/uncategorized/Complete-Guide-to-Deploy-Gitlab-Gitlab-runner-docker/index.html" title="Complete-Guide-to-Deploy-Gitlab/Gitlab-runner/docker"><img src="https://blog.sunhaoyang.net/images/Gitlab.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Complete-Guide-to-Deploy-Gitlab/Gitlab-runner/docker"/></a><div class="content"><a class="title" href="/uncategorized/Complete-Guide-to-Deploy-Gitlab-Gitlab-runner-docker/index.html" title="Complete-Guide-to-Deploy-Gitlab/Gitlab-runner/docker">Complete-Guide-to-Deploy-Gitlab/Gitlab-runner/docker</a><time datetime="2025-09-04T08:05:48.000Z" title="Created 2025-09-04 16:05:48">2025-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Linux/LDAP/The-high-availability-deployment-of-the-LDAP-server/index.html" title="The high-availability deployment of the LDAP server"><img src="https://blog.sunhaoyang.net/images/LDAP.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="The high-availability deployment of the LDAP server"/></a><div class="content"><a class="title" href="/Linux/LDAP/The-high-availability-deployment-of-the-LDAP-server/index.html" title="The high-availability deployment of the LDAP server">The high-availability deployment of the LDAP server</a><time datetime="2025-05-29T10:42:45.000Z" title="Created 2025-05-29 18:42:45">2025-05-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Language/English/20250527/index.html" title="2025/05/27 English accumulation"><img src="https://blog.sunhaoyang.net/images/English.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2025/05/27 English accumulation"/></a><div class="content"><a class="title" href="/Language/English/20250527/index.html" title="2025/05/27 English accumulation">2025/05/27 English accumulation</a><time datetime="2025-05-27T10:30:41.000Z" title="Created 2025-05-27 18:30:41">2025-05-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Cloud/OpenStack/Managing-File-based-Component-Security-with-AIDE/index.html" title="OpenStack Series Chapter7: Managing File based Component Security with AIDE"><img src="https://blog.sunhaoyang.net/images/OpenStack.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack Series Chapter7: Managing File based Component Security with AIDE"/></a><div class="content"><a class="title" href="/Cloud/OpenStack/Managing-File-based-Component-Security-with-AIDE/index.html" title="OpenStack Series Chapter7: Managing File based Component Security with AIDE">OpenStack Series Chapter7: Managing File based Component Security with AIDE</a><time datetime="2025-05-22T06:29:17.000Z" title="Created 2025-05-22 14:29:17">2025-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Cloud/OpenStack/Using-ReaR-to-back-up-OpenStack/index.html" title="OpenStack Series Chapter6: Using ReaR to back Up OpenStack"><img src="https://blog.sunhaoyang.net/images/OpenStack.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack Series Chapter6: Using ReaR to back Up OpenStack"/></a><div class="content"><a class="title" href="/Cloud/OpenStack/Using-ReaR-to-back-up-OpenStack/index.html" title="OpenStack Series Chapter6: Using ReaR to back Up OpenStack">OpenStack Series Chapter6: Using ReaR to back Up OpenStack</a><time datetime="2025-05-15T12:14:05.000Z" title="Created 2025-05-15 20:14:05">2025-05-15</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://blog.sunhaoyang.net/images/footer_background.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Haoyang Sun</div><div class="footer_custom_text"><a href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">
  <img src="https://blog.sunhaoyang.net/images/gonganbeian.png" alt="公安备案" style="vertical-align:middle; width:16px; heigh:16px;"> 辽公网安备21029602001011号
</a>
<a href="https://beian.miit.gov.cn/" rel="noreferrer" target="_blank">
  <img src="https://blog.sunhaoyang.net/images/icpbeian.png" alt="ICP备案" style="vertical-align:middle; width:16px; height:16px;"> 辽ICP备2025048274号-1
</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.sunhaoyang.net/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.sunhaoyang.net/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    GLOBAL_CONFIG_SITE.isPost && getCount()

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('/pluginsSrc/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.newestComments = {
  changeContent: content => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[Image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[Link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[Code]') // replace code
    content = content.replace(/<code>.*?<\/code>/gi, '[Code]') // replace code      
    content = content.replace(/<[^>]+>/g, "") // remove html tag

    if (content.length > 150) {
      content = content.substring(0, 150) + '...'
    }
    return content
  },

  generateHtml: (array, ele) => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class="aside-list-item">'

        if (true && array[i].avatar) {
          const imgAttr = 'src'
          result += `<a href="${array[i].url}" class="thumbnail"><img ${imgAttr}="${array[i].avatar}" alt="${array[i].nick}"></a>`
        }

        result += `<div class="content">
        <a class="comment" href="${array[i].url}" title="${array[i].content}">${array[i].content}</a>
        <div class="name"><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No comments'
    }

    ele.innerHTML = result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh(ele)
  },

  newestCommentInit: (name, getComment) => {
    const $dom = document.querySelector('#card-newest-comments .aside-list')
    if ($dom) {
      const data = btf.saveToLocal.get(name)
      if (data) {
        newestComments.generateHtml(JSON.parse(data), $dom)
      } else {
        getComment($dom)
      }
    }
  },

  run: (name, getComment) => {
    newestComments.newestCommentInit(name, getComment)
    btf.addGlobalFn('pjaxComplete', () => newestComments.newestCommentInit(name, getComment), name)
  }
}</script><script>window.addEventListener('load', () => {
  const keyName = 'twikoo-newest-comments'
  const { changeContent, generateHtml, run } = window.newestComments

  const getComment = ele => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.sunhaoyang.net/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(res => {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        btf.saveToLocal.set(keyName, JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray, ele)
      }).catch(err => {
        console.error(err)
        ele.textContent= "Unable to retrieve comments, please check the configuration"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      btf.getScript('/pluginsSrc/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  run(keyName, getComment)
})</script><div class="aplayer no-destroy" data-id="7613104556" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="/pluginsSrc/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/aplayer/dist/APlayer.min.js"></script><script src="/pluginsSrc/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="/pluginsSrc/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>