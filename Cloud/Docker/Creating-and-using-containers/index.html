<!DOCTYPE html><html lang="en-GB" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker Series (Chapter 2/4): Creating and Using containers | Haoyang Sun's Blog</title><meta name="author" content="Haoyang Sun"><meta name="copyright" content="Haoyang Sun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="This article introduces how to create a container based on an existing images and manage container resources as well.">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker Series (Chapter 2&#x2F;4): Creating and Using containers">
<meta property="og:url" content="https://blog.sunhaoyang.net/Cloud/Docker/Creating-and-using-containers/index.html">
<meta property="og:site_name" content="Haoyang Sun&#39;s Blog">
<meta property="og:description" content="This article introduces how to create a container based on an existing images and manage container resources as well.">
<meta property="og:locale" content="en_GB">
<meta property="og:image" content="https://blog.sunhaoyang.net/images/Docker.png">
<meta property="article:published_time" content="2025-01-27T00:55:24.000Z">
<meta property="article:modified_time" content="2025-02-06T06:48:40.129Z">
<meta property="article:author" content="Haoyang Sun">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.sunhaoyang.net/images/Docker.png"><link rel="shortcut icon" href="https://blog.sunhaoyang.net/images/favicon.ico"><link rel="canonical" href="https://blog.sunhaoyang.net/Cloud/Docker/Creating-and-using-containers/index.html"><link rel="preconnect"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker Series (Chapter 2/4): Creating and Using containers',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://blog.sunhaoyang.net/images/myphoto.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Homepage</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-comment-alt"></i><span> Artitalk</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa-solid fa-user"></i><span> About the author</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Haoyang Sun's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Docker Series (Chapter 2/4): Creating and Using containers</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Homepage</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-comment-alt"></i><span> Artitalk</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa-solid fa-user"></i><span> About the author</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Docker Series (Chapter 2/4): Creating and Using containers</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-01-27T00:55:24.000Z" title="Created 2025-01-27 08:55:24">2025-01-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-02-06T06:48:40.129Z" title="Updated 2025-02-06 14:48:40">2025-02-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Cloud/">Cloud</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>7mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/Cloud/Docker/Creating-and-using-containers/index.html#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><article class="container post-content" id="article-container"><blockquote>
<p>For information on how to install Docker, please refer to: <a href="https://blog.sunhaoyang.net/Cloud/Docker/Installing-docker-engine-in-Ubuntu/index.html">Docker Series (Chapter 0): Installing docker-engine in Ubuntu</a>.</p>
</blockquote>
<blockquote>
<p>For guidance on how to create and use Docker images, please refer to: <a href="https://blog.sunhaoyang.net/Cloud/Docker/Building-and-using-images/index.html">Docker Series (Chapter 1): Building and using images</a>.</p>
</blockquote>
<p>Alright, let’s continue learning the following Chapter.</p>
<h2 id="Best-Practices-for-Building-Dockerfiles"><a href="#Best-Practices-for-Building-Dockerfiles" class="headerlink" title="Best Practices for Building Dockerfiles"></a>Best Practices for Building Dockerfiles</h2><ol>
<li><p>Containers should be ephemeral&#x2F;temporary.</p>
</li>
<li><p>Avoid installing unnecessary packages.</p>
</li>
<li><p>Each container should have only one purpose.</p>
</li>
<li><p>Avoid having too many layers in a container.</p>
</li>
<li><p>Multi-line sorting.</p>
</li>
<li><p>Leveraging cache.</p>
</li>
</ol>
<p>Let me list an example here.</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Base image</span></span><br><span class="line"><span class="keyword">FROM</span> httpd</span><br><span class="line"><span class="comment"># The person who creates and maintains it</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> Haoyang Sun</span><br><span class="line"><span class="comment"># RUN command to execute</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> hello container &gt; \</span></span><br><span class="line"><span class="language-bash">/usr/local/apache2/htdocs/index.html</span></span><br><span class="line"><span class="comment"># expose port as 80</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"><span class="comment"># Define the working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/local/apache2/htdocs</span></span><br></pre></td></tr></table></figure>

<p>Let’s use the Dockerfile to create a new image here.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">shy@flash-shy:/HDD/learn/docker/apache2$ docker build -t web:v1 .</span><br><span class="line">[+] Building 14.4s (8/8) FINISHED                                docker:default</span><br><span class="line"> =&gt; [internal] load build definition from Dockerfile                       0.0s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 189B                                       0.0s</span><br><span class="line"> =&gt; WARN: MaintainerDeprecated: Maintainer instruction is deprecated in f  0.0s</span><br><span class="line"> =&gt; [internal] load metadata for docker.io/library/httpd:latest            4.8s</span><br><span class="line"> =&gt; [auth] library/httpd:pull token for registry-1.docker.io               0.0s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                          0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                            0.0s</span><br><span class="line"> =&gt; [1/3] FROM docker.io/library/httpd:latest@sha256:437b9f7d469dd606fa6d  8.9s</span><br><span class="line"> =&gt; =&gt; resolve docker.io/library/httpd:latest@sha256:437b9f7d469dd606fa6d  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:3b71e7157e7a19c02c985d0962e01b5bbda6e329b24 2.10kB / 2.10kB  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:c14eb63a15a0449b7f25117f57bc1846c023cd706769acb 145B / 145B  1.7s</span><br><span class="line"> =&gt; =&gt; sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d 32B / 32B  0.5s</span><br><span class="line"> =&gt; =&gt; sha256:437b9f7d469dd606fa6d2a5f9a3be55fe3af7e0c6 10.16kB / 10.16kB  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:f7d8bafbd9a9fc570c19628411a8441e8dc6697aa43 7.88kB / 7.88kB  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:af302e5c37e9dc1dbe2eadc8f5059d82a914066b5 28.21MB / 28.21MB  7.1s</span><br><span class="line"> =&gt; =&gt; sha256:abbcd5aab3664cf64a964a4c608f66689db8bcfe8ab 4.20MB / 4.20MB  4.9s</span><br><span class="line"> =&gt; =&gt; sha256:04e5e6c6b4973d97b8b076a550d50ef5ddbfc6d12 26.06MB / 26.06MB  8.4s</span><br><span class="line"> =&gt; =&gt; sha256:7f5fb3689eaee4c87c2455a8e061d6bb52da300369b0325 293B / 293B  5.4s</span><br><span class="line"> =&gt; =&gt; extracting sha256:af302e5c37e9dc1dbe2eadc8f5059d82a914066b541b0d1a  0.6s</span><br><span class="line"> =&gt; =&gt; extracting sha256:c14eb63a15a0449b7f25117f57bc1846c023cd706769acb8  0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6  0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:abbcd5aab3664cf64a964a4c608f66689db8bcfe8abea5b9  0.1s</span><br><span class="line"> =&gt; =&gt; extracting sha256:04e5e6c6b4973d97b8b076a550d50ef5ddbfc6d125439f26  0.3s</span><br><span class="line"> =&gt; =&gt; extracting sha256:7f5fb3689eaee4c87c2455a8e061d6bb52da300369b03257  0.0s</span><br><span class="line"> =&gt; [2/3] RUN echo hello container &gt;   /usr/local/apache2/htdocs/index.ht  0.5s</span><br><span class="line"> =&gt; [3/3] WORKDIR /usr/local/apache2/htdocs                                0.0s</span><br><span class="line"> =&gt; exporting to image                                                     0.1s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                    0.0s</span><br><span class="line"> =&gt; =&gt; writing image sha256:e30e7b98cd48deef0229fbdea27d499b039bf06f2bf3c  0.0s</span><br><span class="line"> =&gt; =&gt; naming to docker.io/library/web:v1                                  0.0s</span><br><span class="line"></span><br><span class="line"> 1 warning found (use docker --debug to expand):</span><br><span class="line"> - MaintainerDeprecated: Maintainer instruction is deprecated in favor of using label (line 3)</span><br></pre></td></tr></table></figure>

<p>After building the iamge called: web:v1, let’s check the list of images.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shy@flash-shy:/HDD/learn/docker/apache2$ docker images</span><br><span class="line">REPOSITORY                                                                                               TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">web                                                                                                      v1        e30e7b98cd48   7 seconds ago   148MB</span><br><span class="line">ubuntu                                                                                                   20.04     9df6d6105df2   5 months ago    72.8MB</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h2 id="Best-Practices-for-naming-the-image"><a href="#Best-Practices-for-naming-the-image" class="headerlink" title="Best Practices for naming the image"></a>Best Practices for naming the image</h2><p>Obviously, We successfully creating a new images about 7 seconds ago. The image’s name is web and its tag is v1. Its size is about 148MB.</p>
<p>So, what is the reason we could quickly find the image we want?</p>
<h3 id="Image-naming-format"><a href="#Image-naming-format" class="headerlink" title="Image naming format"></a>Image naming format</h3><p><code>REPOSITORY+TAG</code>. It is recommended to use <code>version number</code> as the naming convention.</p>
<p>A simple and clear image naming format allows users to quickly identify the image they need without the need for testing.</p>
<h3 id="Explanation-of-the-‘latest’-tag-and-its-usage"><a href="#Explanation-of-the-‘latest’-tag-and-its-usage" class="headerlink" title="Explanation of the ‘latest’ tag and its usage"></a>Explanation of the ‘latest’ tag and its usage</h3><p>If <code>no tag</code> is specified when building the image, the default <code>latest</code> tag will be used.</p>
<p>Therefore, when you see ‘latest’ as the tag of an image, it does not necessarily mean that this is the latest version. It simply means that no tag was specified when the image was created, and nothing more.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">shy@flash-shy:/HDD/learn/docker/apache2$ docker build -t web .</span><br><span class="line">[+] Building 2.4s (8/8) FINISHED                                                                                                                                               docker:default</span><br><span class="line"> =&gt; [internal] load build definition from Dockerfile                                                                                                                                     0.0s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 189B                                                                                                                                                     0.0s</span><br><span class="line"> =&gt; WARN: MaintainerDeprecated: Maintainer instruction is deprecated in favor of using label (line 3)                                                                                    0.0s</span><br><span class="line"> =&gt; [internal] load metadata for docker.io/library/httpd:latest                                                                                                                          2.3s</span><br><span class="line"> =&gt; [auth] library/httpd:pull token for registry-1.docker.io                                                                                                                             0.0s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                                                                                                                                        0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                                                                                                                                          0.0s</span><br><span class="line"> =&gt; [1/3] FROM docker.io/library/httpd:latest@sha256:437b9f7d469dd606fa6d2a5f9a3be55fe3af7e0c66e0329da8c14b291ae0d31c                                                                    0.0s</span><br><span class="line"> =&gt; CACHED [2/3] RUN echo hello container &gt;   /usr/local/apache2/htdocs/index.html                                                                                                       0.0s</span><br><span class="line"> =&gt; CACHED [3/3] WORKDIR /usr/local/apache2/htdocs                                                                                                                                       0.0s</span><br><span class="line"> =&gt; exporting to image                                                                                                                                                                   0.0s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                                                                                                                                  0.0s</span><br><span class="line"> =&gt; =&gt; writing image sha256:e30e7b98cd48deef0229fbdea27d499b039bf06f2bf3c1d137230e5266cd40a5                                                                                             0.0s</span><br><span class="line"> =&gt; =&gt; naming to docker.io/library/web                                                                                                                                                   0.0s</span><br><span class="line"></span><br><span class="line"> 1 warning found (use docker --debug to expand):</span><br><span class="line"> - MaintainerDeprecated: Maintainer instruction is deprecated in favor of using label (line 3)</span><br></pre></td></tr></table></figure>

<p>It is visibly that each period of creating the same image is <code>zero</code>.</p>
<p>Here is the function of <code>cache</code>. Because I have already creating the same image before, it may reuse the cache this time.</p>
<p>Therefore, it will dramatically shorten the creating time.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shy@flash-shy:/HDD/learn/docker/apache2$ docker images</span><br><span class="line">REPOSITORY                                                                                               TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">web                                                                                                      latest    e30e7b98cd48   15 minutes ago   148MB</span><br><span class="line">web                                                                                                      v1        e30e7b98cd48   15 minutes ago   148MB</span><br><span class="line">ubuntu                                                                                                   20.04     9df6d6105df2   5 months ago     72.8MB</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>We could find there are two images, both of them are called web and the image id are the same. The difference is <code>tag</code>, this time I did not add the tag after the image name.</p>
<p>Therefore, the default tag is <code>latest</code>.</p>
<h2 id="Basic-commands-about-images"><a href="#Basic-commands-about-images" class="headerlink" title="Basic commands about images"></a>Basic commands about images</h2><ul>
<li><code>docker build -t image_name:tag_name .</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t web:v1 .</span><br></pre></td></tr></table></figure>

<ul>
<li><code>docker commit container_name image_name:tag_name</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit web web:v2</span><br></pre></td></tr></table></figure>

<ul>
<li><code>docker save image_name:tag_name -o compression_name.tar</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save web:v2 -o web_v2.tar</span><br></pre></td></tr></table></figure>

<ul>
<li><code>docker load -i compression_name</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp web_v2.tar user@ip:/path/to/images</span><br><span class="line">docker load -i web_v2.tar</span><br></pre></td></tr></table></figure>

<h2 id="2-Methods-of-creating-containers-with-image"><a href="#2-Methods-of-creating-containers-with-image" class="headerlink" title="2 Methods of creating containers with image"></a>2 Methods of creating containers with image</h2><p>As we discuss in <a href="https://blog.sunhaoyang.net/Cloud/Docker/Building-and-using-images/index.html">Docker Series (Chapter 1): Building and using images</a>, there are two methods to create a container by using an image.</p>
<ul>
<li><p><code>docker run</code></p>
<p><strong>docker run</strong> is a basic Docker command used to directly start a new container. It is ideal for running a container individually to perform simple tasks or experiments.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:80 --name my-container nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>docker compose</code></p>
<p><strong>docker-compose</strong> is a tool used to define and manage <code>multi-container</code> Docker applications.</p>
<p>It configures services, networks, volumes, and more through a <code>docker-compose.yaml</code> file. docker-compose is ideal for managing applications made up of multiple containers, simplifying the configuration and startup of containers.</p>
<p>It is used for one-click start, stop, and management of multiple containers.</p>
<p>So, <code>docker-compose</code> builds on top of <code>docker run</code>, providing a more efficient and manageable way to handle multiple containers. It is especially useful for managing microservices architectures in development, testing, and production environments.</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">Feature</th>
<th align="center">docker run</th>
<th align="center">docker-compose</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>Use Case</strong></td>
<td align="center">Single container, simple tasks or testing</td>
<td align="center">Multiple containers, complex applications, service dependencies management</td>
</tr>
<tr>
<td align="center"><strong>Configuration Method</strong></td>
<td align="center">Configured through command-line arguments</td>
<td align="center">Defined through the <code>docker-compose.yml</code> file with multiple containers, networks, volumes, etc.</td>
</tr>
<tr>
<td align="center"><strong>Start Multiple Containers</strong></td>
<td align="center">Need to start each container individually</td>
<td align="center">Use <code>docker-compose up</code> to start all containers at once</td>
</tr>
<tr>
<td align="center"><strong>Service Dependency Management</strong></td>
<td align="center">Manually manage dependencies between containers</td>
<td align="center">Define dependencies between containers in the <code>docker-compose.yml</code> file</td>
</tr>
<tr>
<td align="center"><strong>Port Mapping</strong></td>
<td align="center">Manually map ports, set individually for each container</td>
<td align="center">Unified port mapping management for multiple containers in the <code>docker-compose.yml</code> file</td>
</tr>
<tr>
<td align="center"><strong>File Management</strong></td>
<td align="center">No file configuration, relies on command-line arguments</td>
<td align="center">Uses docker-compose.yml file for centralized configuration and service management</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.sunhaoyang.net">Haoyang Sun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.sunhaoyang.net/Cloud/Docker/Creating-and-using-containers/index.html">https://blog.sunhaoyang.net/Cloud/Docker/Creating-and-using-containers/index.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">This article is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Please attribute the original author and source when sharing.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post-share"><div class="social-share" data-image="https://blog.sunhaoyang.net/images/Docker.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Buy Me a Coffee</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://blog.sunhaoyang.net/images/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://blog.sunhaoyang.net/images/wechat.jpg" alt="Wechat"/></a><div class="post-qr-code-desc">Wechat</div></li><li class="reward-item"><a href="https://blog.sunhaoyang.net/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://blog.sunhaoyang.net/images/alipay.jpg" alt="Alipay"/></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Cloud/Docker/Managing-container-resources/index.html" title="Docker Series (Chapter 3/4): Managing Container Resources"><img class="cover" src="https://blog.sunhaoyang.net/images/Docker.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Docker Series (Chapter 3/4): Managing Container Resources</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces memory quotas, CPU quotas, and disk quotas for containers.</div></div></div></a><a class="pagination-related" href="/Management/Scrum/Scrum-Guide2/index.html" title="Scrum Guide (Part2 of 2)"><img class="cover" src="https://blog.sunhaoyang.net/images/Scrum.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Scrum Guide (Part2 of 2)</div></div><div class="info-2"><div class="info-item-1">This article provides an overview of the architecture of Lean and Scrum methodologies, as well as the relevant components involved.</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/Cloud/Docker/Introducing-container-network-and-practising-container-data-management/index.html" title="Docker Series (Chapter 4&#x2F;4): Introducing Container Network and Practising Container Data Management"><img class="cover" src="https://blog.sunhaoyang.net/images/Docker.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-06</div><div class="info-item-2">Docker Series (Chapter 4&#x2F;4): Introducing Container Network and Practising Container Data Management</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces the original network capability of docker and some information about the drive and data bind as well.</div></div></div></a><a class="pagination-related" href="/Cloud/Docker/Managing-container-resources/index.html" title="Docker Series (Chapter 3&#x2F;4): Managing Container Resources"><img class="cover" src="https://blog.sunhaoyang.net/images/Docker.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-27</div><div class="info-item-2">Docker Series (Chapter 3&#x2F;4): Managing Container Resources</div></div><div class="info-2"><div class="info-item-1">This article mainly introduces memory quotas, CPU quotas, and disk quotas for containers.</div></div></div></a><a class="pagination-related" href="/Cloud/Docker/Building-and-using-images/index.html" title="Docker Series (Chapter 1&#x2F;4): Building and using images"><img class="cover" src="https://blog.sunhaoyang.net/images/Docker.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-24</div><div class="info-item-2">Docker Series (Chapter 1&#x2F;4): Building and using images</div></div><div class="info-2"><div class="info-item-1">This article introduces how to build a docker image and how to use the image to create the docker container.</div></div></div></a><a class="pagination-related" href="/Cloud/Docker/Installing-docker-engine-in-Ubuntu/index.html" title="Docker Series (Chapter 0&#x2F;4): Installing docker-engine in Ubuntu"><img class="cover" src="https://blog.sunhaoyang.net/images/Docker.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-23</div><div class="info-item-2">Docker Series (Chapter 0&#x2F;4): Installing docker-engine in Ubuntu</div></div><div class="info-2"><div class="info-item-1">This article introduces the origins of Docker, its application scenarios, and the installation method in Ubuntu.</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://blog.sunhaoyang.net/images/myphoto.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Haoyang Sun</div><div class="author-info-description">DevOps Engineer, Cloud-native Engineer, Open-source technology enthusiast</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content"><div class="center-content" style="text-align: center;">
    <p>My blog is now live!</p>
    <p>Hello everyone! Thank you for visiting my blog!</p>
    <p>Here, I will share my thoughts and reflections on various technologies and aspects of life.</p>
    <p>Please stay tuned for updates!:)</p>
    <p>If you’re interested in discussing any topic with me, feel free to leave a comment or reach out through the contact information provided below.</p>
    <p>Email: Flash_shy@163.com</p>
    <p>QQ ID: 1135300457</p>
    <p>Wechat ID: Flash_sunhy</p>
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Best-Practices-for-Building-Dockerfiles"><span class="toc-number">1.</span> <span class="toc-text">Best Practices for Building Dockerfiles</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Best-Practices-for-naming-the-image"><span class="toc-number">2.</span> <span class="toc-text">Best Practices for naming the image</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-naming-format"><span class="toc-number">2.1.</span> <span class="toc-text">Image naming format</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Explanation-of-the-%E2%80%98latest%E2%80%99-tag-and-its-usage"><span class="toc-number">2.2.</span> <span class="toc-text">Explanation of the ‘latest’ tag and its usage</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Basic-commands-about-images"><span class="toc-number">3.</span> <span class="toc-text">Basic commands about images</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Methods-of-creating-containers-with-image"><span class="toc-number">4.</span> <span class="toc-text">2 Methods of creating containers with image</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Cloud/OpenStack/Introducing-Containerized-Services/index.html" title="Openstack Series Chapter1:Introducing Containerized Services"><img src="https://blog.sunhaoyang.net/images/OpenStack.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Openstack Series Chapter1:Introducing Containerized Services"/></a><div class="content"><a class="title" href="/Cloud/OpenStack/Introducing-Containerized-Services/index.html" title="Openstack Series Chapter1:Introducing Containerized Services">Openstack Series Chapter1:Introducing Containerized Services</a><time datetime="2025-04-29T08:18:50.000Z" title="Created 2025-04-29 16:18:50">2025-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Tools/Frp/Frp-P2P-mode/index.html" title="Frp P2P mode"><img src="https://blog.sunhaoyang.net/images/Frp.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Frp P2P mode"/></a><div class="content"><a class="title" href="/Tools/Frp/Frp-P2P-mode/index.html" title="Frp P2P mode">Frp P2P mode</a><time datetime="2025-04-26T16:29:15.000Z" title="Created 2025-04-27 00:29:15">2025-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Tools/Frp/Frp-supplementation-and-improvement/index.html" title="Frp supplementation and improvement"><img src="https://blog.sunhaoyang.net/images/Frp.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Frp supplementation and improvement"/></a><div class="content"><a class="title" href="/Tools/Frp/Frp-supplementation-and-improvement/index.html" title="Frp supplementation and improvement">Frp supplementation and improvement</a><time datetime="2025-04-25T16:28:28.000Z" title="Created 2025-04-26 00:28:28">2025-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Linux/SSH/Disable-password-based-SSH-login-and-restrict-SSH-access-to-key-based-authentication-on-Linux-and-Mac/index.html" title="Disable password-based SSH login and restrict SSH access to key-based authentication on Linux and Mac"><img src="https://blog.sunhaoyang.net/images/SSH.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Disable password-based SSH login and restrict SSH access to key-based authentication on Linux and Mac"/></a><div class="content"><a class="title" href="/Linux/SSH/Disable-password-based-SSH-login-and-restrict-SSH-access-to-key-based-authentication-on-Linux-and-Mac/index.html" title="Disable password-based SSH login and restrict SSH access to key-based authentication on Linux and Mac">Disable password-based SSH login and restrict SSH access to key-based authentication on Linux and Mac</a><time datetime="2025-04-24T14:37:54.000Z" title="Created 2025-04-24 22:37:54">2025-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Tools/Frp/Complete-Guide-to-Use-Frp/index.html" title="Complete Guide to Use Frp"><img src="https://blog.sunhaoyang.net/images/Frp.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Complete Guide to Use Frp"/></a><div class="content"><a class="title" href="/Tools/Frp/Complete-Guide-to-Use-Frp/index.html" title="Complete Guide to Use Frp">Complete Guide to Use Frp</a><time datetime="2025-04-23T15:24:26.000Z" title="Created 2025-04-23 23:24:26">2025-04-23</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://blog.sunhaoyang.net/images/footer_background.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Haoyang Sun</div><div class="footer_custom_text"><a href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">
  <img src="https://blog.sunhaoyang.net/images/gonganbeian.png" alt="公安备案" style="vertical-align:middle; width:16px; heigh:16px;"> 辽公网安备21029602001011号
</a>
<a href="https://beian.miit.gov.cn/" rel="noreferrer" target="_blank">
  <img src="https://blog.sunhaoyang.net/images/icpbeian.png" alt="ICP备案" style="vertical-align:middle; width:16px; height:16px;"> 辽ICP备2025048274号-1
</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.sunhaoyang.net/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.sunhaoyang.net/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    GLOBAL_CONFIG_SITE.isPost && getCount()

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('/pluginsSrc/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.newestComments = {
  changeContent: content => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[Image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[Link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[Code]') // replace code
    content = content.replace(/<code>.*?<\/code>/gi, '[Code]') // replace code      
    content = content.replace(/<[^>]+>/g, "") // remove html tag

    if (content.length > 150) {
      content = content.substring(0, 150) + '...'
    }
    return content
  },

  generateHtml: (array, ele) => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class="aside-list-item">'

        if (true && array[i].avatar) {
          const imgAttr = 'src'
          result += `<a href="${array[i].url}" class="thumbnail"><img ${imgAttr}="${array[i].avatar}" alt="${array[i].nick}"></a>`
        }

        result += `<div class="content">
        <a class="comment" href="${array[i].url}" title="${array[i].content}">${array[i].content}</a>
        <div class="name"><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No comments'
    }

    ele.innerHTML = result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh(ele)
  },

  newestCommentInit: (name, getComment) => {
    const $dom = document.querySelector('#card-newest-comments .aside-list')
    if ($dom) {
      const data = btf.saveToLocal.get(name)
      if (data) {
        newestComments.generateHtml(JSON.parse(data), $dom)
      } else {
        getComment($dom)
      }
    }
  },

  run: (name, getComment) => {
    newestComments.newestCommentInit(name, getComment)
    btf.addGlobalFn('pjaxComplete', () => newestComments.newestCommentInit(name, getComment), name)
  }
}</script><script>window.addEventListener('load', () => {
  const keyName = 'twikoo-newest-comments'
  const { changeContent, generateHtml, run } = window.newestComments

  const getComment = ele => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.sunhaoyang.net/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(res => {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        btf.saveToLocal.set(keyName, JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray, ele)
      }).catch(err => {
        console.error(err)
        ele.textContent= "Unable to retrieve comments, please check the configuration"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      btf.getScript('/pluginsSrc/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  run(keyName, getComment)
})</script><div class="aplayer no-destroy" data-id="7613104556" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="/pluginsSrc/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/aplayer/dist/APlayer.min.js"></script><script src="/pluginsSrc/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="/pluginsSrc/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>